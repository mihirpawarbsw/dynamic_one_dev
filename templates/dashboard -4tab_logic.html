{% load static %}
<!DOCTYPE html>
<html lang="en" class="openNav">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>BSS Tracker - Selection Window</title>
    <link rel="icon" type="image/x-icon" href="{% static 'dist/img/favicon_home.png' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <!-- main style file -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.10.3/xlsx.full.min.js"></script> -->
    <script type="text/javascript" src="{% static 'dist/js/xlsx.full.min.js' %}"></script>
    <script src="{% static 'dist/js/xlsx.full.min.js' %}"></script>
    <script src="{% static 'dist/js/common.js' %}"></script>
    <!-- <script  src="{% static 'dist/js/xlsx.js' %}"></script> -->
    <!-- <script  src="{% static 'dist/js/jszip.js' %}"></script> -->
    <!-- <script  src="{% static 'dist/js/jquery.min.js' %}"></script> -->
    <!-- <script src="{% static 'plugins/jquery/jquery.min.js' %}"></script> -->
    <script src="{% static 'dist/js/adminlte.min.js' %}"></script>
    <!-- <script src="{% static 'dist/js/drag_drop_script.js' %}"></script> -->
    <script>var csrftoken = '{{csrf_token}}';</script>
    <!--  <script
      src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.1/js/all.min.js"
      integrity="sha512-jAu66pqHWWQ564NS+m2Zxe13Yek98R7JWNjQLzW+PQ4i2jsMxBT1nGrQ0gFUIVJ4kPkEFe5gelBWNEDTBqmn/w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script> -->
    <!-- main style file -->




    <!-- sorting js files start here -->
    <link rel="stylesheet" type="text/css" href="{% static 'dist/css/stylesheet.css' %} " media="screen">
    <link rel="stylesheet" type="text/css" href="{% static 'dist/css/extrafiles/style.css' %} " media="screen">
    <!-- <link rel="stylesheet" type="text/css" href="{% static 'dist/css/github-dark.css' %} " media="screen"> -->
    <!-- <script src="https://code.jquery.com/jquery-git1.min.js"></script> -->
    <script src="{% static 'dist/js/jquery-sortable-lists.js' %} "></script>
    <!-- sorting js files end here -->



    <!-- Bootstrap CSS start-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="{% static 'dist/css/custom.css' %}" />
    <link rel="stylesheet" href="{% static 'dist/css/jquery.multiselect.css' %}" />
    <script src="{% static 'dist/js/sweetalert.min.js' %}" />
    </script>
    <!-- <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script> -->

    <script
        src="https://cdn.jsdelivr.net/npm/gasparesganga-jquery-loading-overlay@2.1.7/dist/loadingoverlay.min.js"></script>
    <!-- <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.1/css/all.min.css"
      integrity="sha512-gMjQeDaELJ0ryCI+FtItusU9MkAifCZcGq789FrzkiM49D8lbDhoaUaIX4ASU187wofMNlgBJ4ckbrXM9sE6Pg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    /> -->
    <!-- Bootstrap CSS end-->
    <!-- drag and drop css added start  -->
    <link rel='stylesheet' href='https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css'>
    <!-- <link rel='stylesheet' href='https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css'> -->
    <link rel="stylesheet" href="{% static 'dist/css/drag_drop_style.css' %}">
    <!-- drag and drop css added end -->
    <style>
        /* .body_width{
            max-width: 642px !important;
        } */
        .card-header-1 {
            background-color: rgba(0, 0, 0, .03);
        }

        .btn-default {
            border: solid 1px #ccc;
        }

        .bcst-theme h4 {
            font-family: inherit;
            line-height: 1.2;
            font-size: 1.4em !important;
            font-weight: 800;
            letter-spacing: -0.03em;
        }

        .style-2::-webkit-scrollbar-track
{
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
	border-radius: 10px;
	background-color: #F5F5F5;
}

.style-2::-webkit-scrollbar
{
	width: 12px;
	background-color: #F5F5F5;
}

.style-2::-webkit-scrollbar-thumb
{
	border-radius: 10px;
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);
	background-color: #cee0fc;
}

        .new-wrapper {
            position: absolute;
            left: 50px;
            width: calc(100% - 50px);
            transition: transform .45s cubic-bezier(0.77, 0, 0.175, 1);
            /* background-color: #ededed; */
            /* min-height: 100vh; */
            height: auto;
        }

        .logout_btn:hover {
            /* background-image: linear-gradient(to right, #C3282A, #3C6BE3); */
            background-color: #595959;
            color: white;
            border: none;
            text-decoration: none;
        }

        /*testing css*/
        .dropdown-toggle {
            position: relative;
        }

        .dropdown-toggle::after {
            position: absolute;
            right: 5px;
            top: 13px;
        }

        .multiselect-container>li {
            padding-top: 5px !important;
            padding-bottom: 5px !important;
            padding-left: 5px !important;
        }

        .multiselect-container>li>a>label {
            padding: 0px !important;
            display: flex;
            flex-direction: row;
            justify-content: flex-start;
            align-items: center;
        }

        .multiselect-container>li>a>label>input {
            margin: 0px !important;
        }

        .required:after {
            content: " *";
            color: red;
            font-size: 16px;
        }

        .multiselect {
            height: 37px !important;
        }

        .dropdown-toggle::after {

            top: 18px !important;
        }

        .multiselect-container li label {
            font-size: 12px;
            /* Adjust the font size as per your requirement */
        }

        .breadcrumb {
            background-color: transparent !important;
        }

        /*.multiselect.dropdown-toggle.btn {
    text-align: left;
    font-size:10px;
    height:30px;
    border-radius:0px;
    background-color:white;
    outline: none;
    border-color:black
    }


   .dropdown-menu{
       font-size:9px
    }
    .btn .caret {
    position: absolute;
    right: 10px;
    top: 10px;
    }*/
    </style>
</head>

<body class=" bcst-theme" style="overflow-x: hidden; background-color: rgb(0 0 0 / 81%) !important;">

    <div class="row header_div">
        <div class="col-2 d-flex pl-4">
            <button href="#" class="bg-transparent hamburger nav-toggle open-panel pl-3 text-white"></button>
            <span class="screen-reader-text">Menu</span>
            <a href="#" class="logotype">
                <!--                BSW <span>CrossDash</span>-->
                <img src="{% static 'dist/img/bcst-logo2.png' %}" class="m-3">
                <!--                <img src="static/dist/">-->
            </a>

        </div>
        <div class="col-md-1 d-flex justify-content-center mt-1">
            <div class="ml-5 mt-1 mt-2 vl"></div>
        </div>
        <div class="col-md-4 mt-3 p-0">
            <h3 class="mt-1 text-white" style="letter-spacing: -0.03em;font-size: 21px;">Dynamic View</h3>






        </div>
        <div class="col-md-5 d-flex justify-content-end mt-2 pt-2">
            <p class="text-white " style="font-size: 16px !important;font-weight: 600;"> {{ request.user.username|capfirst }}</p>
            <div class="dropdown mt-0">
                <button class="border-0 btn btn-secondary dropdown-toggle mt-xl-n2 p-0 px-4 rounded text-white"
                    type="button" data-toggle="dropdown" aria-expanded="false"
                    style="color: black; background-color: transparent !important;font-size: 30px;">
                    <i class="fa fa-user-circle-o mr-2" aria-hidden="true"></i>
                </button>
                <div class="dropdown-menu ml-4">
                    <a href="../logout"><button class="dropdown-item logout_btn logout_btn" type="button"
                            style="font-size: 12px; font-weight: 500;"><i class="fa fa-sign-out pr-2" aria-hidden="true"></i>Logout</button></a>
                    <!-- <button class="dropdown-item" type="button">Another action</button>
                    <button class="dropdown-item" type="button">Something else here</button> -->
                </div>
            </div>

            <!-- <p class="mt-2 p-3"><a href="logout" style="text-align: end;
                  color: black!important;">Logout</a></p> -->
        </div>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 mt-2">
                <div class="alert alert-dismissible alert-warning bg-white border-white d-flex fade mb-2 p-0 p-2 pl-0 show"
                    role="alert">
                    <i class="fa fa-bell px-3 mt-2" aria-hidden="true"
                        style="font-size: 10px;margin-top: 10px;"></i><strong style="font-size: 10px;margin-top: 6px;"
                        class="">If the data is not loading, please click the reload button or use a different browser
                        (e.g. Microsoft Edge). </strong>
                    <div class="ml-auto mx-4 mx-5 px-3 text-right">
                        <a href="javascript: location.reload(true);" type="button"
                            class="bg-light btn btn-warning p-1 px-3 shadow" style="font-size: 10px;color: #856404;border-color:#0d6efd;">Reload this page</a>
                    </div>
                    <button type="button" class="close pt-2 shadow" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>
        </div>
    </div>


    <div class="primary-nav">
        <!-- open close button -->

        </button>
        <nav role="navigation" class="menu">



            <div class="overflow-container">
                <div class="nav-side-menu style-2">
                    <!-- database 1 start -->
                    <i class="fa fa-bars fa-2x toggle-btn" data-toggle="collapse" data-target="#menu-content"></i>
                    <div class="menu-list">
                        <ul id="menu-content" class="collapse mt-2 p-2 show sub-menu">
                            <ul class="sub-menu collapse show" id="products">
                                <li class="main collapsed border-bottom" data-toggle="collapse"
                                    data-target="#getting_1"><a href="#" class="text-white" id="database_open"
                                        style="font-size: 10px !important; text-transform: uppercase;">Database</a></li>
                                <!-- main menu start here -->
                                <div id="display_leftside_menu1" class="border-bottom"></div>
                            </ul>
                        </ul>
                        <!-- <div id="accordion">
                            <div class="border-0 card">
                              <div class="card-header-3" id="headingOne1">
                                <h5 class="mb-0">
                                  <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne1" aria-expanded="true" aria-controls="collapseOne" style="font-size: 12px;">
                                    Multichannel_Q1_2024
                                  </button>
                                </h5>
                              </div>
                          
                              <div id="collapseOne1" class="collapse" aria-labelledby="headingOne1" data-parent="#accordion">
                                <div class="card-body">
                                    <ul class="search-results-list border-0"></ul>
                                  Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                                </div>
                              </div>
                            </div>
                            <div class="border-0 card">
                              <div class="card-header-3" id="headingTwo">
                                <h5 class="mb-0">
                                  <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo" style="font-size: 12px;">
                                    Multichannel_Q2_2024
                                  </button>
                                </h5>
                              </div>
                              <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                                <div class="card-body">
                                  Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                                </div>
                              </div>
                            </div>
                        </div> -->

                          
                    </div>
                    <!-- database 1 end -->
                    <!-- database 2 start -->
                    <!-- <i class="fa fa-bars fa-2x toggle-btn" data-toggle="collapse" data-target="#menu-content2"></i>
                    <div class="menu-list">
                        <ul id="menu-content2" class="collapse mt-2 p-2 show sub-menu">
                            <ul class="sub-menu collapse show" id="products2">
                                <li class="main collapsed border-bottom" data-toggle="collapse" data-target="#getting_2"><a href="#" class="text-white" id="database_open2" style="font-size: 12px !important; text-transform: uppercase;">SKU Database</a></li>
                                <div id="display_leftside_menu2" class="border-bottom">
                                </div>
                            </ul>
                        </ul>
                    </div>  -->
                    <!-- database 2 end -->
                    <!-- database 3 start -->
                    <!-- <i class="fa fa-bars fa-2x toggle-btn" data-toggle="collapse" data-target="#menu-content3"></i>
                    <div class="menu-list">
                        <ul id="menu-content3" class="collapse mt-2 p-2 show sub-menu">
                            <ul class="sub-menu collapse show" id="products3">
                                <li class="main collapsed border-bottom" data-toggle="collapse" data-target="#getting_3"><a href="#" class="text-white" id="database_open3" style="font-size: 12px !important; text-transform: uppercase;">Doors Database</a></li>
                                <div id="display_leftside_menu3" class="border-bottom">
                                </div>
                            </ul>
                        </ul>
                    </div>  -->
                    <!-- database 3 end -->

                </div>

            </div>

        </nav>



    </div>




    <div class="new-wrapper">
        <!--top header-->
        <!-- <div class="bg-white sticky-top">
    <h4 class="border-left p-3 text-primary">Brandscapes Sales Tracker</h4>
</div> -->
        <div class="bg-white d-flex justify-content-between sticky-top">

            <!-- <p class="mt-3 pt-1" style="color: black;"><b>Hi {{request.user}}</b></p> -->
            <!-- <p class="mt-3 pt-1" style="color: black;"><b>Hi {{ username }}</b></p> -->

        </div>
        <div class="row pl-2">
            <div class="col-md-12">
                <a href="/landingpage" type="button" class="btn btn-primary shadow"
                    style="background: #0b5ed7; font-weight: 600;"><i class="fa fa-arrow-left pr-2"
                        aria-hidden="true"></i>Go back</a>

                <!-- <button type="button" class="btn btn-primary ml-2 p-1" data-toggle="modal"
                    data-target="#popup_dataupload" style="background: #0b5ed7 !important;">Data Upload </button> -->
                <!-- onclick="show_uploaded_data_in_table()" -->
            </div>
        </div>
        <div id="main" class="bg-white mt-2 mx-2 px-0">



            <div id="main-contents" class="px-4 py-2">

                <!-- <div class="row">
                    <div class="col-4 mb-2 p-0">
                        <button type="button" class="btn btn-primary ml-2 p-1" data-toggle="modal" data-target="#popup1">Data Upload <img src="/static/dist/img/fileupload1.png" class="img-fluid"></button>

                    </div>
                </div> -->

                <div id="json_resp" style="display:none;"></div>

                <div style="display:none" id="mainsection_column_name_store" data-myval=''></div>
                <!-- <p class="text-md-left pt-3">Data Source : <span id="source_name" class="text-primary font-weight-bold">---</span></p> -->

                <!--               <div class="row">
                    <div class="bg-white col px-2 py-1" style="background-color:lavender;">
                        <div class="form-inline">
                            <label for="example-post" class="mr-2">Base Filter</label>
                            <select id="basefilter" name="multiselect" multiple="multiple">
                               <option value="Gender" selected>Gender</option>
                                <option value="Region">Region</option>
                                <option value="Age_Group">Age_Group</option>
                            </select>
                        </div>
                    </div>
                </div>  -->

                <div class="row" style="display:none">
                    <div class="col-12 mt-2">
                        <div class="accordion" id="accordionExample">
                            <div class="card row">
                                <div class="card-header d-flex" id="headingOne">
                                    <label for="example-post" class="mr-2">Selected Database1</label>
                                </div>
                                <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
                                    data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="menu-list">
                                            <div id="dropzone" class="p-1 d-flex"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



                <div class="row mt-3 ">
                    <!-- row section start -->
                    <div class="col-3 px-4">
                        <div class="accordion" id="accordionExample">
                            <div class="card row shadow">
                                <div class="card-header p-2 shadow" id="headingOne">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label for="example-post" class="mr-2 pt-1">Row</label>
                                            <!-- <label for="example-post" class="mr-2 pt-1">Dimensions</label> -->
                                        </div>
                                        <div class="col-md-6 d-flex justify-content-end">
                                            <label for="example-post" id="clear_all_row"
                                                class="mt-xl-1  badge badge-secondary"><img
                                                    src="/static/dist/img/clearall.png" class="" data-toggle="tooltip"
                                                    data-placement="top" title="Clear All"></label>


                                        </div>
                                    </div>
                                </div>

                                <div id="collapseOne" class="collapse show w-100" aria-labelledby="headingOne"
                                    data-parent="#accordionExample">
                                    <div class="card-body">

                                        <div class="menu-list" id="row_section">
                                            <ul id="sTreePlus" class="sTreePlus mV10">
                                                <!--  <li><div>Item 1</div></li>
                                            <li><div>Item 2</div></li>
                                            <li><div>Item 3</div></li>
                                            <li><div>Item 4</div></li>
                                            <li><div>Item 5</div></li> -->
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- row section end -->
                    <br>

                    <!-- column section start -->
                    <div class="col-3 px-4">
                        <div class="accordion" id="accordionExample">
                            <div class="card row shadow">
                                <div class="card-header p-2 shadow" id="headingOne">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label for="example-post" class="mr-2 pt-1">Column</label>
                                            <!-- <label for="example-post" class="mr-2 pt-1">Facts</label> -->
                                        </div>
                                        <div class="col-md-6 d-flex justify-content-end">
                                            <label for="example-post" id="clear_all_column"
                                                class="mt-xl-1  badge badge-secondary"><img
                                                    src="/static/dist/img/clearall.png" class=""></label>
                                        </div>
                                    </div>



                                </div>

                                <div id="collapseOne" class="collapse show w-100" aria-labelledby="headingOne"
                                    data-parent="#accordionExample">
                                    <div class="card-body">

                                        <div class="menu-list px-2" id="columnvariable_section">
                                            <ul id="sTree3" class="sTree3 mV10">
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- column section end -->

                    <!-- column section start -->
                    <div class="col-3 px-4">
                        <div class="accordion" id="accordionExample">
                            <div class="card row shadow">
                                <div class="card-header p-2 shadow" id="headingOne">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label for="example-post" class="mr-2 pt-1">Other Variable</label>
                                            <!-- <label for="example-post" class="mr-2 pt-1">Facts</label> -->
                                        </div>
                                        <div class="col-md-6 d-flex justify-content-end">
                                            <label for="example-post" id="clear_all_column"
                                                class="mt-xl-1  badge badge-secondary"><img
                                                    src="/static/dist/img/clearall.png" class=""></label>
                                        </div>
                                    </div>



                                </div>

                                <div id="collapseOne" class="collapse show w-100" aria-labelledby="headingOne"
                                    data-parent="#accordionExample">
                                    <div class="card-body">

                                        <div class="menu-list px-2" id="othervariable_section">
                                            <ul id="othervariable" class="othervariable mV10">
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- column section end -->

                    <!-- column section start -->
                    <div class="col-3 px-4">
                        <div class="accordion" id="accordionExample">
                            <div class="card row shadow">
                                <div class="card-header p-2 shadow" id="headingOne">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label for="example-post" class="mr-2 pt-1">Values</label>
                                            <!-- <label for="example-post" class="mr-2 pt-1">Facts</label> -->
                                        </div>
                                        <div class="col-md-6 d-flex justify-content-end">
                                            <label for="example-post" id="clear_all_column"
                                                class="mt-xl-1  badge badge-secondary"><img
                                                    src="/static/dist/img/clearall.png" class=""></label>
                                        </div>
                                    </div>



                                </div>

                                <div id="collapseOne" class="collapse show w-100" aria-labelledby="headingOne"
                                    data-parent="#accordionExample">
                                    <div class="card-body">

                                        <div class="menu-list px-2" id="column_section">
                                            <ul id="sTree2" class="sTree2 mV10">
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- column section end -->


                    <br>
                    





                    <div class="row">
                        <div class="col-12 mt-4">
                            <button type="button" class="btn btn-primary p-2 ml-2" id="toArrBtn" style="background-color: #0b5ed7 !important;">Next</button>
                            <!-- <button type="button" class="btn btn-primary" onclick="get_table_resp()"> Go</button> -->
                        </div>

                    </div>


                    <!--  <section>
                <button type="button" class="btn btn-primary"  id="toArrBtn" class="btn">Array Data</button>
            </section>
 -->

                </div>
            </div>

        </div>


        <!-- ======================modal 1 upload data start====================== -->
        <!-- <div class="modal" id="popup1" tabindex="-1" aria-labelledby="popup1Label" aria-hidden="true">
                <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                    <h5 class="modal-title" id="popup1Label">Upload Data</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <input type="file" class="custom-file-input form-control-file"  id="docfile1">
                            <button type="submit" id="Upload_data_btn" class="btn btn-light mt-2 mb-4">
                                <i class="fa fa-upload" aria-hidden="true"></i> Upload Data
                            </button>
                            <span  id="country_upload_file1"></span>
                        </div>
                        <div class="d-none">
                            <div class="form-group">
                                <label for="example-post" class="mr-2 mb-0">Data Type</label><br>
                                <select id="calculation_type" class="form-control" >
                                     <option value="respondent" selected>Respondent</option>
                                    <option value="response" >Response</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                    <input type="button" class="btn btn-primary" id="insert_data"  value="Save changes" >
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
                </div>
            </div> -->
        <!-- ======================modal 1 upload data end====================== -->

        <!-- ======================modal 1 new upload data start====================== -->
        <div class="modal" id="popup1" tabindex="-1" aria-labelledby="popup1Label" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text-dark" id="popup1Label">Upload Data</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <form method="post" enctype="multipart/form-data" id="upload-form">
                        <div id="filename_store" class="d-none"></div>
                        {% csrf_token %}
                        <div class="modal-body">
                            <div class="form-group">
                                <i class="fa fa-upload" aria-hidden="true"></i> Upload Data
                                <input type="file" name="up" id="pick" class="text-white">
                                <input type="button" class="btn btn-primary" onclick="uploadData()" value="Upload"
                                    style="float: right;" id="upload_data_btn">
                                <div id="list" class="mt-2" style="font-size:12px;"></div>

                            </div>
                            <div class="d-none">
                                <div class="form-group">
                                    <label for="example-post" class="mr-2 mb-0">Data Type</label><br>
                                    <select id="calculation_type" class="form-control">
                                        <option value="respondent" selected>Respondent</option>
                                        <option value="response">Response</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <!-- d-none -->
                        <div class="container d-none " id="questionnaire">
                            <hr>
                            <div class="form-group ">
                                <p for="example-post" class="mr-2 mb-0 required">1.What type of periodical data?</p>
                                <select id="periodical_type" class="form-control">
                                    <option value="" selected disabled>Please select</option>
                                    <option value="yearly">yearly</option>
                                    <option value="quarterly">Quarterly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="weekly">Weekly</option>
                                </select>
                            </div>
                            <div class="form-group ">
                                <p for="example-post" class="mr-2 mb-0 required">2.Select the Year column</p>
                                <select id="que_year" class="form-control">
                                    <option value="" selected disabled>Please select</option>
                                    <!-- <option value="A">A</option>
                                <option value="B" >B</option>
                                <option value="C" >C</option> -->
                                </select>
                            </div>
                            <div class="form-group ">
                                <p for="example-post" class="mr-2 mb-0 required">3.Select the Period column</p>
                                <select id="que_period" class="form-control">
                                    <option value="" selected disabled>Please select</option>
                                    <!--  <option value="p1">P1</option>
                                <option value="p2" >P2</option>
                                <option value="p3" >P3</option> -->
                                </select>
                            </div>
                            <div class="form-group ">
                                <p for="example-post" class="mr-2 mb-0 required">4.Please select all the numerical
                                    columns</p>
                                <select id="que_numerical_list" class="form-control" multiple
                                    style="height:37px !important">
                                </select>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <!-- <input type="button" class="btn btn-primary"  onclick="uploadData()"  value="Upload" > -->
                            <p class="btn btn-primary d-none" onclick="Submit_data()" id="Submit_data" value="Submit">
                                Submit</p>
                            <p type="button" class="btn btn-primary" id="close_model" onclick="close_model()"
                                data-dismiss="modal">Close</p>
                        </div>
                </div>
                </form>
            </div>
        </div>
        <!-- ======================modal 1 new upload data end====================== -->

        <!-- ==========================modal 2  ================================== -->
        <!-- Modal -->
        <div class="modal fade" id="popup2" tabindex="-1" role="dialog" aria-labelledby="popup2Label"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="popup2Label">Upload Dtata</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        modal data
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                        <!-- <input type="button" class="btn btn-primary" id="insert_data" > -->
                    </div>
                </div>
            </div>
        </div>



        <!-- ==========================modal 2  ================================== -->
        <!-- Modal -->
        <div class="modal fade" id="popup_dataupload" tabindex="-1" role="dialog" aria-labelledby="popup2Label"
            aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <p class="modal-title" id="popup2Label" style="font-size: 18px;">Upload Data</p>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="accordion" id="accordionExample_upload_data_display">
                            <div class="row">


                                <!-- <div class="col-md-3" style="align-content: center;">
                    <div class="form-group search_hidden_btn">
                    <label for="example-post" class="mr-2 mb-0">Select upload type</label><br>
                    <select id="select_upload_file_type" name="time_range">
                    <option value="" disabled selected>Select an option </option>
                    <option value="new_file" >New File</option>
                    <option value="exiting_file">Exiting File</option>
                    </select>
                    </div>
                    </div>
                     -->
                                <div class="col-md-4" style="align-content: center;">
                                    <div class="form-group search_hidden_btn">
                                        <label for="example-post" class="mr-2 mb-0">Select File to upload</label><br>
                                        <select id="select_upload_file_type_list" name="time_range">
                                            <option value="" disabled selected>Select an option </option>
                                            <option value="Q1">Q1</option>
                                            <option value="Q2">Q2</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="col-md-5" style="align-content: center;">
                                    <div class="input-group">
                                        <div class="custom-file">
                                            <form method="post" enctype="multipart/form-data" id="upload-form">
                                                <input type="hidden" name="csrfmiddlewaretoken"
                                                    value="{{ csrf_token }}">
                                                <div id="filename_store_second_fun" class="d-none"></div>';
                                                {% csrf_token %}
                                                <input type="file" name="file_upload_input_name"
                                                    id="file_upload_input_id" class="custom-file-input "
                                                    aria-describedby="inputGroupFileAddon04">
                                                <div id="list2" class="mt-2" style="font-size:12px;"></div>
                                                <label class="custom-file-label" for="inputGroupFile04">Choose
                                                    file</label>
                                                <div></div>
                                            </form>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-2">
                                    <input type="button" class="btn btn-primary" onclick="Submit_data_second_fun(this)"
                                        value="Upload" style="float: right;" id="upload_data_btn"
                                        style="background: #0b80a1 !important;">
                                </div>
                            </div>
                            <!--<hr> <h4 class="text-secondary">List of uploaded files</h4><hr> -->
                            <div id="accordionExample_upload_data_display_list"></div>
                            <!-- card body start  -->

                            <!-- card body end  -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="bg-dark btn h4 p-1 text-white" data-dismiss="modal">Close</button>
                        <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
                        <!-- <input type="button" class="btn btn-primary" id="insert_data" > -->
                    </div>
                </div>
            </div>
        </div>


        <!-- Optional JavaScript -->
        <!-- <script  src="{% static 'dist/js/main_dashboard.js' %}"></script> -->
        <!-- <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script> -->

        <script src="{% static 'dist/js/popper.min.js' %}"></script>
        <script src="{% static 'dist/js/bootstrap.min.js' %}"></script>
        <!-- Multi Select Css & JS Start -->
        <script type="text/javascript" src="{% static 'dist/js/bootstrap-multiselect.min.js'  %}"></script>
        <link rel="stylesheet" href="{% static 'dist/css/bootstrap-multiselect.css' %}">
        <script type="text/javascript" src="{% static 'dist/js/bootstrap-multiselect.js' %}"></script>
        <!-- drag and drop js start  -->
        <script src="{% static 'dist/js/jquery-ui.min.js'  %}"></script>
        <!-- <script  src="{% static 'dist/js/dashboard_13_09_2023_bk.js'  %}"></script> -->
        <script src="{% static 'dist/js/dashboard.js'  %}"></script>
        <!-- <script  src="{% static 'dist/js/dashboard_working_file.js'  %}"></script> -->

        <script>
            document.addEventListener('DOMContentLoaded', function() {
  const headers = document.querySelectorAll('.collapsible .header');

  headers.forEach(header => {
    header.addEventListener('click', function() {
      const activeHeader = document.querySelector('.collapsible .active');
      
      // Close the currently active content, if any
      if (activeHeader && activeHeader !== this.parentElement) {
        activeHeader.classList.remove('active');
      }
      
      // Toggle the clicked content
      this.parentElement.classList.toggle('active');
    });
  });
});

        </script>
        <script type="text/javascript">
            $(document).ready(function () {
                setTimeout(function () {
                    $("#database_open,#database_open2,#database_open3").trigger('click');

                }, 1000);
            });
        </script>
        <!-- drag and drop js end -->
        <!--old upload data js start -->
        <script>
            $('.nav-toggle').click(function (e) {
                e.preventDefault();
                $("html").toggleClass("openNav");
                $(".nav-toggle").toggleClass("active");

            });

            var ExcelToJSON = function () {

                this.parseExcel = function (file) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        var data = e.target.result;
                        var workbook = XLSX.read(data, {
                            type: 'binary'
                        });
                        console.log('workbook', workbook)
                        var uploaded_data = [];
                        workbook.SheetNames.forEach(function (sheetName) {
                            // Here is your object
                            var XL_row_object = XLSX.utils.sheet_to_row_object_array(workbook.Sheets[sheetName]);
                            uploaded_data.push(XL_row_object)
                            // var json_object = JSON.stringify(XL_row_object);
                            console.log('data resp', XL_row_object);
                            // localStorage.removeItem("upload-items");
                            // localStorage.setItem('upload-items', json_object);

                            // STORE JSON DATA IN INNER HTML for one sheet
                            // $('#json_resp').empty();
                            // var div = document.getElementById('json_resp');
                            // div.innerHTML = json_object;
                        })
                        // new code added for 2 sheet upload dynamically start here
                        var json_object = JSON.stringify(uploaded_data);
                        $('#json_resp').empty();
                        var div = document.getElementById('json_resp');
                        div.innerHTML = json_object;
                        // new code added for 2 sheet upload dynamically end here
                        console.log(' END FUNCTION LOOP')
                        console.log('uploaded_data array', uploaded_data)
                    };

                    reader.onerror = function (ex) {
                        console.log(ex);
                    };

                    reader.readAsBinaryString(file);
                };
            };

            function handleFileSelect(evt) {
                var files = evt.target.files; // FileList object
                var xl2json = new ExcelToJSON();
                xl2json.parseExcel(files[0]);
            }
            document.getElementById('docfile1').addEventListener('change', handleFileSelect, true);

            document.getElementById('Upload_data_btn').addEventListener('click', openDialog);
            function openDialog() {
                document.getElementById('docfile1').click();
            }

        </script>
        <!--old upload data js end -->

        <!-- #########################################################################  -->
        <!--new upload data function start by market wise -->
        <script type="text/javascript">



        </script>
        <!--new upload data function end by market wise -->
        <!-- #########################################################################  -->

        <!--new upload data js start -->
        <script>
            window.onload = () => {
                document.getElementById('pick').addEventListener('change', handleFileSelect);
            };

            function handleFileSelect() {
                var list = document.getElementById('list');
                list.innerHTML = '';

                var files = document.getElementById('pick').files;
                for (var i = 0; i < files.length; i++) {
                    var file = files[i];
                    var row = document.createElement('div');
                    row.innerHTML = `${file.name} (${formatSize(file.size)}) <strong></strong>`;
                    list.appendChild(row);
                }
            }

            function uploadData() {
                // $.LoadingOverlay("show");
                // $.LoadingOverlay("show", {
                //     image       : "",
                //     fontawesome : "fa fa-cog fa-spin"
                // });
                var filename = $('input[type=file]').val().split('\\').pop();
                // alert(filename)

                if (hasExtension(filename, ['.xlsx', '.csv'])) {
                    $.LoadingOverlay("show", {
                        image: "",
                        text: "Loading..."
                    });
                    setTimeout(function () {
                        $.LoadingOverlay("text", "Yep, still loading...");
                    }, 2500);

                    var files = document.getElementById('pick').files;
                    console.log('files', files[0]['name'])
                    if (files.length === 0) {
                        console.error('No files selected for upload');
                        swal({
                            title: "Opps!",
                            text: "No files selected for upload!",
                            icon: "warning",
                        });

                        return;
                    }

                    var formData = new FormData();
                    for (var i = 0; i < files.length; i++) {
                        formData.append('up', files[i]);
                    }

                    fetch("{% url 'upload_chunk' %}", {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'X-CSRFToken': getCookie('csrftoken')
                        }
                    })
                        .then(response => response.json())
                        .then(data => {
                            if (data.ok === 1) {
                                console.log('Upload successful');
                                setTimeout(function () {
                                    $.LoadingOverlay("hide", true);
                                    // swal({
                                    //     title: "Great!",
                                    //     text: "Your Data uploaded successfully!!",
                                    //     icon: "success",
                                    //     showCancelButton: true,
                                    //     confirmButtonColor: '#DD6B55',
                                    //     confirmButtonText: 'Yes, I am sure!',
                                    //     cancelButtonText: "No, cancel it!"
                                    //  }).then(
                                    //        function () { location.reload(); },
                                    //        function () { return false; }
                                    //        );
                                    swal({
                                        title: "Great!",
                                        text: "Your Data has been save successfully! please complete the upload process",
                                        icon: "success",
                                        showCancelButton: true,
                                        confirmButtonColor: '#DD6B55',
                                        confirmButtonText: 'Yes, I am sure!',
                                        cancelButtonText: "No, cancel it!"
                                    }).then(
                                        function () {
                                            location.reload();
                                            //  $("#questionnaire").removeClass("d-none");
                                            //  $("#Submit_data").removeClass("d-none");
                                            //  $("#upload_data_btn").addClass("d-none");
                                            //  $("#filename_store").html(data.filename);
                                            //  questionnaire_filter_column(data);
                                            // return false; 
                                        },
                                        function () { return false; }
                                    );



                                }, 400);
                            } else {
                                $.LoadingOverlay("hide", true);
                                console.error('Upload failed: ' + data.info);
                                swal({
                                    title: "Opps!",
                                    text: 'Upload failed: ' + data.info,
                                    icon: "warning",
                                });
                            }
                        })
                        .catch(error => console.error('Error:', error));

                } else {
                    // alert('No extention found')
                    swal({
                        title: "Opps!",
                        text: 'Uploaded data failed, please upload it in xlsx format ',
                        icon: "warning",
                    });
                }


            }

            function questionnaire_filter_column(resp) {


                $("#que_year").empty();
                $("#que_period").empty();
                $("#que_numerical_list").empty();

                $("#que_year").append(' <option value="" selected disabled>Please select</option>');
                $("#que_period").append(' <option value="" selected disabled>Please select</option>');
                $.each(resp.column_list, function (k, value) {

                    $("#que_year").append('<option value="' + value + '" >' + value + '</option>');
                    $("#que_period").append('<option value="' + value + '" >' + value + '</option>');


                });
                $.each(resp.numerical_columns, function (k, value) {

                    $("#que_numerical_list").append('<option value="' + value + '" >' + value + '</option>');

                });

                $("#que_numerical_list").multiselect('rebuild');
                $("#que_numerical_list").multiselect({
                    //  enableClickableOptGroups: true,
                    enableFiltering: true,
                    maxHeight: 400,
                    enableCaseInsensitiveFiltering: true,
                    enableClickableOptGroups: true,
                    numberDisplayed: 1,
                    includeSelectAllOption: true,
                    selectAll: true,
                    search: true,
                });

            }

            function hasExtension_old(inputID, exts) {
                var fileName = document.getElementById(inputID).value;
                return (new RegExp('(' + exts.join('|').replace(/\./g, '\\.') + ')$')).test(fileName);
            }

            function hasExtension(filename, extensions) {
                return extensions.some(ext => filename.toLowerCase().endsWith(ext));
            }

            function formatSize(bytes) {
                var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
                if (bytes === 0) return '0 Byte';
                var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
                return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];
            }

            function getCookie(name) {
                var cookieValue = null;
                if (document.cookie && document.cookie !== '') {
                    var cookies = document.cookie.split(';');
                    for (var i = 0; i < cookies.length; i++) {
                        var cookie = cookies[i].trim();
                        if (cookie.substring(0, name.length + 1) === (name + '=')) {
                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
            }
        </script>
        <!--new upload data js end -->

        <script>
            $('#popup1').appendTo("body")
            $('#popup2').appendTo("body")
            $('#popup_dataupload').appendTo("body")
        </script>



        <script>
            $(document).ready(function () {
                $('#rowfilter').multiselect({
                    includeSelectAllOption: true,
                    enableFiltering: false,
                    maxHeight: 200,
                    // widthSynchronizationMode: 'ifPopupIsWider',
                    buttonWidth: '200px'
                    // buttonContainer: '<div class="btn-group w-100" />'
                });
                $('#basefilter').multiselect({
                    includeSelectAllOption: true,
                    enableFiltering: false,
                    maxHeight: 200,
                    dropRight: true,
                    widthSynchronizationMode: 'ifPopupIsWider',
                    buttonWidth: '200px'
                    // buttonContainer: '<div class="btn-group w-100" />'
                });

                $('#columnfilter').multiselect({
                    includeSelectAllOption: true,
                    buttonWidth: '100%',
                    dropRight: false,
                    enableFiltering: false,
                    maxHeight: 200,
                    widthSynchronizationMode: 'always',
                    buttonWidth: '200px'
                    // columns: 1,
                    // placeholder: '--Select Col Type--',
                    //     selectAll: true,
                    //     search   : true,
                    //     minHeight: 100
                });

                $('#que_numerical_list').multiselect({
                    includeSelectAllOption: true,
                    buttonWidth: '100%',
                    dropRight: false,
                    enableFiltering: false,
                    maxHeight: 200,
                    widthSynchronizationMode: 'always',


                    // columns: 1,
                    // placeholder: '--Select Col Type--',
                    //     selectAll: true,
                    //     search   : true,
                    //     minHeight: 100
                });
                // $('#select_upload_file_type').multiselect({
                //   // includeSelectAllOption: true,
                //   maxHeight: 200,
                //   // search: true,
                //   // enableCaseInsensitiveFiltering: true,
                //   buttonWidth: '110px',
                //   numberDisplayed: 1,
                // nonSelectedText: 'Select an option' // This is the placeholder text
                // });
                // $('#select_upload_file_type_list').multiselect({
                //   // includeSelectAllOption: true,
                //   maxHeight: 200,
                //   // search: true,
                //   // enableCaseInsensitiveFiltering: true,
                //   buttonWidth: '150px',
                //   numberDisplayed: 1,
                //    nonSelectedText: 'Select an option'
                // });
            });
        </script>
        <script type="text/javascript">
            $(function () {
                var options = {
                    placeholderCss: { 'background-color': '#ff8' },
                    hintCss: { 'background-color': '#bbf' },
                    onChange: function (cEl) {
                        console.log('onChange');
                    },
                    complete: function (cEl) {
                        console.log('complete');
                    },
                    isAllowed: function (cEl, hint, target) {
                        // Be carefull if you test some ul/ol elements here.
                        // Sometimes ul/ols are dynamically generated and so they have not some attributes as natural ul/ols.
                        // Be careful also if the hint is not visible. It has only display none so it is at the previous place where it was before(excluding first moves before showing).
                        if (target.data('module') === 'c' && cEl.data('module') !== 'c') {
                            hint.css('background-color', '#ff9999');
                            return false;
                        }
                        else {
                            hint.css('background-color', '#99ff99');
                            return true;
                        }
                    },
                    opener: {
                        active: true,
                        as: 'html',  // if as is not set plugin uses background image
                        close: '<i class="fa fa-minus c3"></i>',  // or 'fa-minus c3'
                        open: '<i class="fa fa-plus"></i>',  // or 'fa-plus'
                        openerCss: {
                            'display': 'inline-block',
                            //'width': '18px', 'height': '18px',
                            'float': 'left',
                            'margin-left': '-5px',
                            // 'margin-left': '-35px',
                            'margin-right': '5px',
                            //'background-position': 'center center', 'background-repeat': 'no-repeat',
                            'font-size': '1.1em'
                        }
                    },
                    ignoreClass: 'clickable'
                };

                var optionsPlus = {
                    insertZonePlus: true,
                    placeholderCss: { 'background-color': '#ff8' },
                    hintCss: { 'background-color': '#bbf' },
                    opener: {
                        active: true,
                        as: 'html',  // if as is not set plugin uses background image
                        close: '<i class="fa fa-minus c3"></i>',
                        open: '<i class="fa fa-plus"></i>',
                        openerCss: {
                            'display': 'inline-block',
                            'float': 'left',
                            'margin-left': '-5px',
                            // 'margin-left': '-35px',
                            'margin-right': '5px',
                            'font-size': '1.1em'
                        }
                    }
                };

                $('#sTree3').sortableLists(options);
                $('#othervariable').sortableLists(options);
                $('#sTree2').sortableLists(options);
                $('#sTreePlus').sortableLists(optionsPlus);

                $('#toArrBtn').on('click', function () { console.log($('#sTree2').sortableListsToArray()); });
                $('#toHierBtn').on('click', function () { console.log($('#sTree2').sortableListsToHierarchy()); });
                $('#toStrBtn').on('click', function () { console.log($('#sTree2').sortableListsToString()); });
                $('.descPicture').on('click', function (e) { $(this).toggleClass('descPictureClose'); });

                $('.clickable').on('click', function (e) { alert('Click works fine! IgnoreClass stopped onDragStart event.'); });

                /* Scrolling anchors */
                $('#toPictureAnch').on('mousedown', function (e) { scrollToAnch('pictureAnch'); return false; });
                $('#toBaseElementAnch').on('mousedown', function (e) { scrollToAnch('baseElementAnch'); return false; });
                $('#toBaseElementAnch2').on('mousedown', function (e) { scrollToAnch('baseElementAnch'); return false; });
                $('#toCssPatternAnch').on('mousedown', function (e) { scrollToAnch('cssPatternAnch'); return false; });

                function scrollToAnch(id) {
                    return true;
                    $('html, body').animate({
                        scrollTop: '-=-' + $("#" + id).offset().top + 'px'
                    }, 750);
                    return false;
                }

            });





        </script>

        <!-- #############################################################################3 -->
        <!--2nd data upload logic function start for -->
        <script type="text/javascript">

            window.onload = () => {
                // alert(1)
                document.getElementById('file_upload_input_id').addEventListener('change', handleFileSelect2);
            };

            function handleFileSelect2() {
                var list = document.getElementById('list2');
                list.innerHTML = '';

                var files = document.getElementById('file_upload_input_id').files;
                for (var i = 0; i < files.length; i++) {
                    var file = files[i];
                    var row = document.createElement('div');
                    row.innerHTML = `${file.name} (${formatSize(file.size)}) <strong></strong>`;
                    list.appendChild(row);
                }
            }

            function Submit_data_second_fun(e) {
                // alert('Submit_data_second_fun')
                // $.LoadingOverlay("show");
                // $.LoadingOverlay("show", {
                //     image       : "",
                //     fontawesome : "fa fa-cog fa-spin"
                // });

                var file_upload_input_id = 'file_upload_input_id';
                var list = document.getElementById('list2');
                list.innerHTML = '';



                var filename = $('#' + file_upload_input_id).val().split('\\').pop();
                // alert(filename)

                // if (hasExtension(filename, ['.xlsx', '.csv'])) {
                $.LoadingOverlay("show", {
                    image: "",
                    text: "Loading..."
                });
                setTimeout(function () {
                    $.LoadingOverlay("text", "Yep, still loading...");
                }, 2500);

                let url_get = new URL(window.location.href);
                // Create a URLSearchParams object
                let params = new URLSearchParams(url_get.search);
                // Retrieve the parameters
                let data_type = params.get('type');
                console.log('data_type-->', data_type)


                var files = document.getElementById(file_upload_input_id).files;
                console.log('files', files)
                if (files.length === 0) {
                    console.error('No files selected for upload');
                    swal({
                        title: "Opps!",
                        text: "No files selected for upload!",
                        icon: "warning",
                    });

                    return;
                }

                var formData = new FormData();
                for (var i = 0; i < files.length; i++) {
                    formData.append('file_upload_input_name', files[i]);
                    formData.append('data_type', data_type);
                }

                fetch("{% url 'upload_chunk_2' %}", {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-CSRFToken': getCookie('csrftoken')
                    }
                })
                    .then(response => response.json())
                    .then(data => {
                        if (data.code === 200) {
                            setTimeout(function () {
                                $.LoadingOverlay("hide", true);
                                swal({
                                    title: "Great!",
                                    text: "Your Data has been uploaded successfully!",
                                    icon: "success",
                                    showCancelButton: true,
                                    confirmButtonColor: '#DD6B55',
                                    confirmButtonText: 'Yes, I am sure!',
                                    cancelButtonText: "No, cancel it!"
                                }).then(
                                    function () {
                                        // location.reload();
                                        // show_uploaded_data_in_table(data);

                                    },
                                    function () { return false; }
                                );



                            }, 400);
                        } else {
                            $.LoadingOverlay("hide", true);
                            console.error('Upload failed: ' + data);
                            swal({
                                title: "Opps!",
                                // text: 'Upload failed: ' + data.info,
                                icon: "warning",
                            });
                        }
                    })
                    .catch(error => console.error('Error:', error));

                // } else {
                //     // alert('No extention found')
                //     swal({
                //         title: "Opps!",
                //         text: 'Uploaded data failed, please upload it in xlsx format ',
                //         icon: "warning",
                //     });
                // }


            }
        </script>

        <!--2nd data upload logic function end for -->
        <!-- #############################################################################3 -->


        <!-- <script type="text/javascript">

        // 
        //

        var html;
        for (var i = 1; i<5000; i++) {
            html +=' <li class="child sub-main collapsed pl-4" data-toggle="collapse" data-target="#intro2"><a class="child" href="#">Gender_'+i+'</a></li>';
        }
        $('#getting2').html(html);
        

        // $('#getting2')
    </script> -->

        <!--   <script type="text/javascript">
          $('.drag').draggable({ 
      appendTo: 'body',
      helper: 'clone'
    });

       //SECTION 1  clickable
    $('#sTreePlus').droppable({

      activeClass: 'active',
      hoverClass: 'hover',
      accept: ":not(.ui-sortable-helper)", // Reject clones generated by sortable
      drop: function (e, ui) {
         alert('sTreePlus')
        var table_name=ui.draggable[0].getAttribute("data-filename");
        console.log('==============ss',table_name);
        var $el = $('<li class="drop-item " id="item_b1" data-module="b" data-filename="'+table_name+'" data-value="' + ui.draggable.text() + '"><div><span id="clickable">' + ui.draggable.text() + '</span></div></li>');
        // $el.append($('<button type="button" onclick="myFunction()" class="btn btn-default btn-xs remove "><i class="fa fa-minus-square" aria-hidden="true"></i></button>').click(function () { $(this).parent().detach(); }));
        $(this).append($el);
        // console.log('Table section',e);
        var Row_array_data=$('#sTreePlus').sortableListsToArray();
        var Column_array_data=$('#sTree2').sortableListsToArray();
        find_table_name_dy(Row_array_data,Column_array_data)
      console.log('line 201 Row_array_data',Row_array_data)
      console.log('lline 201 Column_array_data',Column_array_data)


      }
    }).sortable({
      items: '.drop-item',
      sort: function() {
        // gets added unintentionally by droppable interacting with sortable
        // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
        $( this ).removeClass( "active" );
      }
    });

   //SECTION 2
    $('#sTree2').droppable({
      activeClass: 'active',
      hoverClass: 'hover',
      accept: ":not(.ui-sortable-helper)", // Reject clones generated by sortable
      drop: function (e, ui) {
         alert('sTree2')
        var table_name=ui.draggable[0].getAttribute("data-filename");
        var $el = $('<li class="drop-item" id="item_b1" data-module="b"  data-filename="'+table_name+'" data-value="' + ui.draggable.text() + '"><div>' + ui.draggable.text() + '</div></li>');
        // $el.append($('<button type="button" class="btn btn-default btn-xs remove"><i class="fa fa-minus-square" aria-hidden="true"></i></button>').click(function () { $(this).parent().detach(); }));
        $(this).append($el);
         var Row_array_data1=$('#sTreePlus').sortableListsToArray();
        var Column_array_data1=$('#sTree2').sortableListsToArray();
          console.log('Row_array_data Row 111',Row_array_data1)
      console.log('length col 111',Column_array_data1)

        // alert('ss')
        find_table_name_dy(Row_array_data1,Column_array_data1)
      }
    }).sortable({
      items: '.drop-item',
      sort: function() {
        // gets added unintentionally by droppable interacting with sortable
        // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
        $( this ).removeClass( "active" );
      }
    });

    </script> -->



</body>

</html>