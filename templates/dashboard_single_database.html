{% load static %}
<!DOCTYPE html>
<html lang="en" class="openNav">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>BSS Tracker - Selection Window</title>
    <link rel="icon" type="image/x-icon" href="{% static 'dist/img/favicon_home.png' %}">
    <!-- main style file -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.10.3/xlsx.full.min.js"></script> -->
    <script type="text/javascript" src="{% static 'dist/js/xlsx.full.min.js' %}"></script>
    <script src="{% static 'dist/js/xlsx.full.min.js' %}"></script>
    <script src="{% static 'dist/js/common.js' %}"></script>
    <!-- <script  src="{% static 'dist/js/xlsx.js' %}"></script> -->
    <!-- <script  src="{% static 'dist/js/jszip.js' %}"></script> -->
    <!-- <script  src="{% static 'dist/js/jquery.min.js' %}"></script> -->
    <!-- <script src="{% static 'plugins/jquery/jquery.min.js' %}"></script> -->
    <script src="{% static 'dist/js/adminlte.min.js' %}"></script>
    <!-- <script src="{% static 'dist/js/drag_drop_script.js' %}"></script> -->
    <script>var csrftoken = '{{csrf_token}}';</script>
    <!--  <script
      src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.1/js/all.min.js"
      integrity="sha512-jAu66pqHWWQ564NS+m2Zxe13Yek98R7JWNjQLzW+PQ4i2jsMxBT1nGrQ0gFUIVJ4kPkEFe5gelBWNEDTBqmn/w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script> -->
    <!-- main style file -->




    <!-- sorting js files start here -->
    <link rel="stylesheet" type="text/css" href="{% static 'dist/css/stylesheet.css' %} " media="screen">
    <link rel="stylesheet" type="text/css" href="{% static 'dist/css/extrafiles/style.css' %} " media="screen">
    <!-- <link rel="stylesheet" type="text/css" href="{% static 'dist/css/github-dark.css' %} " media="screen"> -->
    <!-- <script src="https://code.jquery.com/jquery-git1.min.js"></script> -->
    <script src="{% static 'dist/js/jquery-sortable-lists.js' %} "></script>
    <!-- sorting js files end here -->



    <!-- Bootstrap CSS start-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="{% static 'dist/css/custom.css' %}" />
    <link rel="stylesheet" href="{% static 'dist/css/jquery.multiselect.css' %}" />
    <script src="{% static 'dist/js/sweetalert.min.js' %}" />
    </script>
    <!-- <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script> -->

    <script
        src="https://cdn.jsdelivr.net/npm/gasparesganga-jquery-loading-overlay@2.1.7/dist/loadingoverlay.min.js"></script>
    <!-- <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.1/css/all.min.css"
      integrity="sha512-gMjQeDaELJ0ryCI+FtItusU9MkAifCZcGq789FrzkiM49D8lbDhoaUaIX4ASU187wofMNlgBJ4ckbrXM9sE6Pg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    /> -->
    <!-- Bootstrap CSS end-->
    <!-- drag and drop css added start  -->
    <link rel='stylesheet' href='https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css'>
    <!-- <link rel='stylesheet' href='https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css'> -->
    <link rel="stylesheet" href="{% static 'dist/css/drag_drop_style.css' %}">
    <!-- drag and drop css added end -->
    <style>
        .btn-default {
            border: solid 1px #ccc;
        }

        .bcst-theme h4 {
    font-family: inherit;
    line-height: 1.2;
    font-size: 1.4em !important;
    font-weight: 800;
    letter-spacing: -0.03em;
}

        .new-wrapper {
            position: absolute;
            left: 50px;
            width: calc(100% - 50px);
            transition: transform .45s cubic-bezier(0.77, 0, 0.175, 1);
            /* background-color: #ededed; */
            /* min-height: 100vh; */
            height: auto;
        }

        .logout_btn:hover{
      background-image: linear-gradient(to right, #C3282A, #3C6BE3);
      color: white;
      border: none;
      text-decoration: none;
    }

        /*testing css*/
        .dropdown-toggle {
            position: relative;
        }

        .dropdown-toggle::after {
            position: absolute;
             right: 5px; 
            top: 13px;
        }

        .multiselect-container>li {
            padding-top: 5px !important;
            padding-bottom: 5px !important;
            padding-left: 5px !important;
        }

        .multiselect-container>li>a>label {
            padding: 0px !important;
            display: flex;
            flex-direction: row;
            justify-content: flex-start;
            align-items: center;
        }

        .multiselect-container>li>a>label>input {
            margin: 0px !important;
        }

        .required:after {
            content: " *";
            color: red;
            font-size: 16px;
        }

        .multiselect {
            height: 37px !important;
        }

        .dropdown-toggle::after {

            top: 18px !important;
        }

        .multiselect-container li label {
            font-size: 12px;
            /* Adjust the font size as per your requirement */
        }

        .breadcrumb{
            background-color: transparent !important;
        }

        /*.multiselect.dropdown-toggle.btn {
    text-align: left;
    font-size:10px;
    height:30px;
    border-radius:0px;
    background-color:white;
    outline: none;
    border-color:black
    }


   .dropdown-menu{
       font-size:9px
    }
    .btn .caret {
    position: absolute;
    right: 10px;
    top: 10px;
    }*/
    </style>
</head>

<body class=" bcst-theme" style="overflow-x: hidden; background-color: #e2e3e5 !important;">

    <div class="row header_div">
        <div class="col-2 d-flex pl-4">
            <button href="#" class="bg-transparent hamburger nav-toggle open-panel pl-3 text-white"></button>
            <span class="screen-reader-text">Menu</span>
            <a href="#" class="logotype">
                <!--                BSW <span>CrossDash</span>-->
                <img src="{% static 'dist/img/bcst-logo2.png' %}" class="m-3">
                <!--                <img src="static/dist/">-->
            </a>

        </div>
        <div class="col-md-1"><div class="ml-5 mt-1 mt-2 vl"></div></div>
        <div class="col-md-4 mt-3 p-0">
            <h4 class="mt-1 text-white" style="letter-spacing: -0.03em;">BrandScapes Sales Tracker</h4>

           



            <!-- <nav aria-label="breadcrumb">
                <ol class="breadcrumb p-0">
                  <li class="breadcrumb-item"><a href="#" class="text-white"><i class="fa fa-home" aria-hidden="true"></i></a></li>
                  <li class="breadcrumb-item"><a href="#" class="text-white">Library</a></li>
                  <li class="breadcrumb-item text-white" aria-current="page">Data</li>
                </ol>
              </nav> -->
        </div>
        <div class="col-md-5 d-flex justify-content-end mt-2 pt-2">
            <p class="text-white " style="font-size: 16px !important;font-weight: 600;"> {{ request.user.username|capfirst }}</p>
              <div class="dropdown mt-0">
                  <button class="border-0 btn btn-secondary dropdown-toggle mt-xl-n2 p-0 px-4 rounded text-white" type="button" data-toggle="dropdown" aria-expanded="false" style="color: black; background-color: transparent !important;font-size: 30px;">
                      <i class="fa fa-user-circle-o mr-2" aria-hidden="true"></i>
                  </button>
                  <div class="dropdown-menu">
                      <a href="../logout"><button class="dropdown-item logout_btn logout_btn" type="button" style="font-size: 15px; font-weight: 500;">Logout</button></a>
                    <!-- <button class="dropdown-item" type="button">Another action</button>
                    <button class="dropdown-item" type="button">Something else here</button> -->
                  </div>
                </div>
        
              <!-- <p class="mt-2 p-3"><a href="logout" style="text-align: end;
                  color: black!important;">Logout</a></p> -->
          </div>
    </div>


    <div class="primary-nav">
        <!-- open close button -->

        </button>
        <nav role="navigation" class="menu mt-2">



            <div class="overflow-container">

                <div class="nav-side-menu">

                    <i class="fa fa-bars fa-2x toggle-btn" data-toggle="collapse" data-target="#menu-content"></i>

                    <div class="menu-list">
                        <ul id="menu-content" class="collapse mt-2 p-2 show sub-menu">
                            <!-- <li  data-toggle="collapse" data-target="#products" class="collapsed">
                                  <a href="#">Contract<span class="arrow"></span></a>
                                </li> -->
                            <ul class="sub-menu collapse show" id="products">
                                <li class="main collapsed border-bottom" data-toggle="collapse" data-target="#getting">
                                    <a href="#" class="text-white" id="database_open" style="font-size: 12px !important; text-transform: uppercase;">Database</a>
                                </li>
                                <!-- main menu start here -->
                                <div id="display_leftside_menu" class="border-bottom">
                                    <!-- table one start-->
                                    <!--  <ul class="subb-menu collapse" id="getting">
                                            <li class="child sub-main collapsed" data-toggle="collapse" data-target="#intro4">
                                                 <a class="child" href="#">Table name1</a>
                                            </li>
                                            <ul id="intro4" class="child-sub collapse">
                                                <ul class="subb-menu collapse show">
                                                   <li class="child sub-main collapsed pl-4" >
                                                        <a class="child" href="#">Age1</a>
                                                    </li>
                                                    <li class="child sub-main collapsed pl-4" >
                                                        <a class="child" href="#">Gender1</a>
                                                    </li> 
                                                </ul>
                                            </ul> 
                                        </ul> -->
                                    <!-- table one start-->

                                    <!-- table one start-->
                                    <!-- <ul class="subb-menu collapse" id="getting">
                                            <li class="child sub-main collapsed" data-toggle="collapse" data-target="#intro">
                                                 <a class="child dealerDetails" href="#" id="table_name">Table name2</a>
                                            </li>
                                            <ul id="intro" class="child-sub collapse">
                                                <li class="pl-4">
                                                
                                                    <div id="dealerDropdown" class="dropdown-container child  hide bg-transparent border-0">
                                                      <div class="search bg-transparent" >
                                                        <input type="text" class="search-box"/>
                                                      </div>
                                                      <div class="search-result bg-transparent ">
                                                        <ul class="search-results-list border-0">
                                                        </ul>
                                                      </div>
                                                    </div> 
                                                </li>
                                            </ul>

                                        </ul>  -->
                                    <!-- table one end-->

                                    <!-- table one start-->
                                    <!-- <ul class="subb-menu collapse" id="getting">
                                            <li class="child sub-main collapsed" data-toggle="collapse" data-target="#intro3">
                                                 <a class="child dealerDetails" href="#" id="table_name">Table name3</a>
                                            </li>
                                            <ul id="intro3" class="child-sub collapse">
                                                <li class="pl-4">
                                               
                                                    <div id="dealerDropdown" class="dropdown-container child  hide bg-transparent border-0">
                                                      <div class="search bg-transparent" >
                                                        <input type="text" class="search-box"/>
                                                      </div>
                                                      <div class="search-result bg-transparent ">
                                                        <ul class="search-results-list border-0">
                                                        </ul>
                                                      </div>
                                                    </div> 
                                                </li>
                                            </ul>
                                        </ul>  -->
                                    <!-- table one end-->



                                    <!-- <ul class="subb-menu collapse show" id="getting" style="">
                                        <li class="child sub-main" data-toggle="collapse" data-target="#intro1" aria-expanded="true"><a class="child dealerDetails" href="#" data-get_table_name="Electrolux- India filled_less_rows_respondent" onclick="get_all_column_data(this);" data-get_id_name="dealerDropdown1" data-filename="Sales_Data_Original_edited_respondent">Sales_Data_Original_edited_respondent</a></li>
                                        <ul id="intro1" class="child-sub collapse show" style="">
                                            <li class="pl-4">
                                                <div id="dealerDropdown1" class="dropdown-container child  hide bg-transparent border-0" style="display: block;"><div class="search bg-transparent">
                                                    <input type="text" class="search-box">
                                                </div>
                                                <div class="search-result bg-transparent ">
                                                    <ul class="search-results-list border-0">
                                                        <li class="text-left drag child collapsed text-break border-bottom ui-draggable ui-draggable-handle" data-filename="Sales_Data_Original_edited_respondent" data-toggle="collapse" data-target="#intro2" id="0"><input type="checkbox" id="vehicle1" name="vehicle1" value="Bike"><a href="#" data-flag="0" class="text-wrap" style="color:blue !important">Country</a></li>
                                                        <li class="text-left drag child collapsed text-break border-bottom ui-draggable ui-draggable-handle" data-filename="Sales_Data_Original_edited_respondent" data-toggle="collapse" data-target="#intro2" id="1"><input type="checkbox" id="vehicle1" name="vehicle1" value="Bike"><a href="#" data-flag="0" class="text-wrap" style="color:blue !important">Category</a></li>

                                                    </ul>
                                                </div>
                                            </div> 
                                        </li>
                                        </ul>
                                    </ul> -->


                                </div>
                                <!-- <div id="display_leftside_menu"></div> -->
                            </ul>



                            <!-- main menu end here -->
                        </ul>
                        </ul>
                    </div>


                    <!--level menu start by anis-->

                    <!--level menu end by anis-->

                </div>

            </div>

        </nav>



    </div>




    <div class="new-wrapper">
        <!--top header-->
        <!-- <div class="bg-white sticky-top">
    <h4 class="border-left p-3 text-primary">Brandscapes Sales Tracker</h4>
</div> -->
        <div class="bg-white d-flex justify-content-between sticky-top">

            <!-- <p class="mt-3 pt-1" style="color: black;"><b>Hi {{request.user}}</b></p> -->
            <!-- <p class="mt-3 pt-1" style="color: black;"><b>Hi {{ username }}</b></p> -->

        </div>

        <div id="main" class="bg-white mt-2 mx-2 px-0">



            <div id="main-contents" class="px-4 py-2">

<!--                 <div class="row">
                    <div class="col-4 mb-2 p-0">
                        <button type="button" class="btn btn-primary ml-2 p-1" data-toggle="modal" data-target="#popup1">Data Upload <img src="/static/dist/img/fileupload1.png" class="img-fluid"></button>

                    </div>
                </div> -->

                <div id="json_resp" style="display:none;"></div>

                <div style="display:none" id="mainsection_column_name_store" data-myval=''></div>
                <!-- <p class="text-md-left pt-3">Data Source : <span id="source_name" class="text-primary font-weight-bold">---</span></p> -->

                <!--               <div class="row">
                    <div class="bg-white col px-2 py-1" style="background-color:lavender;">
                        <div class="form-inline">
                            <label for="example-post" class="mr-2">Base Filter</label>
                            <select id="basefilter" name="multiselect" multiple="multiple">
                               <option value="Gender" selected>Gender</option>
                                <option value="Region">Region</option>
                                <option value="Age_Group">Age_Group</option>
                            </select>
                        </div>
                    </div>
                </div>  -->

                <div class="row" style="display:none">
                    <div class="col-12 mt-2">
                        <div class="accordion" id="accordionExample">
                            <div class="card row">
                                <div class="card-header d-flex" id="headingOne">
                                    <label for="example-post" class="mr-2">Selected Database1</label>
                                </div>
                                <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
                                    data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="menu-list">
                                            <div id="dropzone" class="p-1 d-flex"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-3 ">
                    <!-- row section start -->
                    <div class="col-6 px-4">
                        <div class="accordion" id="accordionExample">
                            <div class="card row shadow">
                                <div class="card-header p-2 shadow" id="headingOne">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label for="example-post" class="mr-2 pt-1">Dimensions</label>
                                        </div>
                                        <div class="col-md-6 d-flex justify-content-end">
                                            <label for="example-post" id="clear_all_row"
                                        class="mt-xl-1  badge badge-secondary"><img src="/static/dist/img/clearall.png" class="" data-toggle="tooltip" data-placement="top" title="Clear All"></label>

                                        
                                        </div>
                                    </div>
                                    
                                    
                                    <!-- <div class="col">
                                     <div class="form-inline">
                                        <label for="example-post" class="mr-2">Row</label>
                                        <select id="rowfilter" name="multiselect[]" multiple="multiple">
                                        </select>
                                    </div>
                                </div> -->
                                </div>

                                <div id="collapseOne" class="collapse show w-100" aria-labelledby="headingOne"
                                    data-parent="#accordionExample">
                                    <div class="card-body">

                                        <div class="menu-list" id="row_section">
                                            <ul id="sTreePlus" class="sTreePlus mV10">
                                                <!--  <li><div>Item 1</div></li>
                                            <li><div>Item 2</div></li>
                                            <li><div>Item 3</div></li>
                                            <li><div>Item 4</div></li>
                                            <li><div>Item 5</div></li> -->
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- row section end -->
                    <br>
                    <!-- column section start -->
                    <div class="col-6 px-4">
                        <div class="accordion" id="accordionExample">
                            <div class="card row shadow">
                                <div class="card-header p-2 shadow" id="headingOne">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label for="example-post" class="mr-2 pt-1">Facts</label>
                                        </div>
                                        <div class="col-md-6 d-flex justify-content-end">
                                            <label for="example-post" id="clear_all_column"
                                        class="mt-xl-1  badge badge-secondary"><img src="/static/dist/img/clearall.png" class=""></label>
                                        </div>
                                    </div>
                                    
                                    

                                </div>

                                <div id="collapseOne" class="collapse show w-100" aria-labelledby="headingOne"
                                    data-parent="#accordionExample">
                                    <div class="card-body">

                                        <div class="menu-list px-2" id="column_section">
                                            <ul id="sTree2" class="sTree2 mV10">
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- column section end -->






                    <div class="row">
                        <div class="col-12 mt-4">
                            <button type="button" class="btn btn-primary p-2 ml-2" id="toArrBtn">Run</button>
                            <!-- <button type="button" class="btn btn-primary" onclick="get_table_resp()"> Go</button> -->
                        </div>

                    </div>


                    <!--  <section>
                <button type="button" class="btn btn-primary"  id="toArrBtn" class="btn">Array Data</button>
            </section>
 -->

                </div>
            </div>

        </div>


        <!-- ======================modal 1 upload data start====================== -->
        <!-- <div class="modal" id="popup1" tabindex="-1" aria-labelledby="popup1Label" aria-hidden="true">
                <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                    <h5 class="modal-title" id="popup1Label">Upload Data</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <input type="file" class="custom-file-input form-control-file"  id="docfile1">
                            <button type="submit" id="Upload_data_btn" class="btn btn-light mt-2 mb-4">
                                <i class="fa fa-upload" aria-hidden="true"></i> Upload Data
                            </button>
                            <span  id="country_upload_file1"></span>
                        </div>
                        <div class="d-none">
                            <div class="form-group">
                                <label for="example-post" class="mr-2 mb-0">Data Type</label><br>
                                <select id="calculation_type" class="form-control" >
                                     <option value="respondent" selected>Respondent</option>
                                    <option value="response" >Response</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                    <input type="button" class="btn btn-primary" id="insert_data"  value="Save changes" >
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
                </div>
            </div> -->
        <!-- ======================modal 1 upload data end====================== -->

        <!-- ======================modal 1 new upload data start====================== -->
        <div class="modal" id="popup1" tabindex="-1" aria-labelledby="popup1Label" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text-dark" id="popup1Label">Upload Data</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <form method="post" enctype="multipart/form-data" id="upload-form">
                        <div id="filename_store" class="d-none"></div>
                        {% csrf_token %}
                        <div class="modal-body">
                            <div class="form-group">
                                <i class="fa fa-upload" aria-hidden="true"></i> Upload Data
                                <input type="file" name="up" id="pick" class="text-white">
                                <input type="button" class="btn btn-primary" onclick="uploadData()" value="Upload"
                                    style="float: right;" id="upload_data_btn">
                                <div id="list" class="mt-2" style="font-size:12px;"></div>

                            </div>
                            <div class="d-none">
                                <div class="form-group">
                                    <label for="example-post" class="mr-2 mb-0">Data Type</label><br>
                                    <select id="calculation_type" class="form-control">
                                        <option value="respondent" selected>Respondent</option>
                                        <option value="response">Response</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <!-- d-none -->
                        <div class="container d-none " id="questionnaire">
                            <hr>
                            <div class="form-group ">
                                <p for="example-post" class="mr-2 mb-0 required">1.What type of periodical data?</p>
                                <select id="periodical_type" class="form-control">
                                    <option value="" selected disabled>Please select</option>
                                    <option value="yearly">yearly</option>
                                    <option value="quarterly">Quarterly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="weekly">Weekly</option>
                                </select>
                            </div>
                            <div class="form-group ">
                                <p for="example-post" class="mr-2 mb-0 required">2.Select the Year column</p>
                                <select id="que_year" class="form-control">
                                    <option value="" selected disabled>Please select</option>
                                    <!-- <option value="A">A</option>
                                <option value="B" >B</option>
                                <option value="C" >C</option> -->
                                </select>
                            </div>
                            <div class="form-group ">
                                <p for="example-post" class="mr-2 mb-0 required">3.Select the Period column</p>
                                <select id="que_period" class="form-control">
                                    <option value="" selected disabled>Please select</option>
                                    <!--  <option value="p1">P1</option>
                                <option value="p2" >P2</option>
                                <option value="p3" >P3</option> -->
                                </select>
                            </div>
                            <div class="form-group ">
                                <p for="example-post" class="mr-2 mb-0 required">4.Please select all the numerical
                                    columns</p>
                                <select id="que_numerical_list" class="form-control" multiple
                                    style="height:37px !important">
                                </select>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <!-- <input type="button" class="btn btn-primary"  onclick="uploadData()"  value="Upload" > -->
                            <p class="btn btn-primary d-none" onclick="Submit_data()" id="Submit_data" value="Submit">
                                Submit</p>
                            <p type="button" class="btn btn-primary" id="close_model" onclick="close_model()"
                                data-dismiss="modal">Close</p>
                        </div>
                </div>
                </form>
            </div>
        </div>
        <!-- ======================modal 1 new upload data end====================== -->

        <!-- ==========================modal 2  ================================== -->
        <!-- Modal -->
        <div class="modal fade" id="popup2" tabindex="-1" role="dialog" aria-labelledby="popup2Label"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="popup2Label">Modal title</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        modal data
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                        <!-- <input type="button" class="btn btn-primary" id="insert_data" > -->
                    </div>
                </div>
            </div>
        </div>


        <!-- Optional JavaScript -->
        <!-- <script  src="{% static 'dist/js/main_dashboard.js' %}"></script> -->
        <!-- <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script> -->

        <script src="{% static 'dist/js/popper.min.js' %}"></script>
        <script src="{% static 'dist/js/bootstrap.min.js' %}"></script>
        <!-- Multi Select Css & JS Start -->
        <script type="text/javascript" src="{% static 'dist/js/bootstrap-multiselect.min.js'  %}"></script>
        <link rel="stylesheet" href="{% static 'dist/css/bootstrap-multiselect.css' %}">
        <script type="text/javascript" src="{% static 'dist/js/bootstrap-multiselect.js' %}"></script>
        <!-- drag and drop js start  -->
        <script src="{% static 'dist/js/jquery-ui.min.js'  %}"></script>
        <!-- <script  src="{% static 'dist/js/dashboard_13_09_2023_bk.js'  %}"></script> -->
        <script src="{% static 'dist/js/dashboard.js'  %}"></script>
        <!-- <script  src="{% static 'dist/js/dashboard_working_file.js'  %}"></script> -->
        <script type="text/javascript">
            $(document).ready(function () {
                setTimeout(function () {
                    $("#database_open").trigger('click');

                }, 1000);
            });
        </script>
        <!-- drag and drop js end -->
        <!--old upload data js start -->
        <script>
            $('.nav-toggle').click(function (e) {
                e.preventDefault();
                $("html").toggleClass("openNav");
                $(".nav-toggle").toggleClass("active");

            });

            var ExcelToJSON = function () {

                this.parseExcel = function (file) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        var data = e.target.result;
                        var workbook = XLSX.read(data, {
                            type: 'binary'
                        });
                        console.log('workbook', workbook)
                        var uploaded_data = [];
                        workbook.SheetNames.forEach(function (sheetName) {
                            // Here is your object
                            var XL_row_object = XLSX.utils.sheet_to_row_object_array(workbook.Sheets[sheetName]);
                            uploaded_data.push(XL_row_object)
                            // var json_object = JSON.stringify(XL_row_object);
                            console.log('data resp', XL_row_object);
                            // localStorage.removeItem("upload-items");
                            // localStorage.setItem('upload-items', json_object);

                            // STORE JSON DATA IN INNER HTML for one sheet
                            // $('#json_resp').empty();
                            // var div = document.getElementById('json_resp');
                            // div.innerHTML = json_object;
                        })
                        // new code added for 2 sheet upload dynamically start here
                        var json_object = JSON.stringify(uploaded_data);
                        $('#json_resp').empty();
                        var div = document.getElementById('json_resp');
                        div.innerHTML = json_object;
                        // new code added for 2 sheet upload dynamically end here
                        console.log(' END FUNCTION LOOP')
                        console.log('uploaded_data array', uploaded_data)
                    };

                    reader.onerror = function (ex) {
                        console.log(ex);
                    };

                    reader.readAsBinaryString(file);
                };
            };

            function handleFileSelect(evt) {
                var files = evt.target.files; // FileList object
                var xl2json = new ExcelToJSON();
                xl2json.parseExcel(files[0]);
            }
            document.getElementById('docfile1').addEventListener('change', handleFileSelect, true);

            document.getElementById('Upload_data_btn').addEventListener('click', openDialog);
            function openDialog() {
                document.getElementById('docfile1').click();
            }

        </script>
        <!--old upload data js end -->

        <!--new upload data js start -->
        <script>
            window.onload = () => {
                document.getElementById('pick').addEventListener('change', handleFileSelect);
            };

            function handleFileSelect() {
                var list = document.getElementById('list');
                list.innerHTML = '';

                var files = document.getElementById('pick').files;
                for (var i = 0; i < files.length; i++) {
                    var file = files[i];
                    var row = document.createElement('div');
                    row.innerHTML = `${file.name} (${formatSize(file.size)}) <strong></strong>`;
                    list.appendChild(row);
                }
            }

            function uploadData() {
                // $.LoadingOverlay("show");
                // $.LoadingOverlay("show", {
                //     image       : "",
                //     fontawesome : "fa fa-cog fa-spin"
                // });
                var filename = $('input[type=file]').val().split('\\').pop();
                // alert(filename)

                if (hasExtension(filename, ['.xlsx', '.csv'])) {
                    $.LoadingOverlay("show", {
                        image: "",
                        text: "Loading..."
                    });
                    setTimeout(function () {
                        $.LoadingOverlay("text", "Yep, still loading...");
                    }, 2500);

                    var files = document.getElementById('pick').files;
                    console.log('files', files[0]['name'])
                    if (files.length === 0) {
                        console.error('No files selected for upload');
                        swal({
                            title: "Opps!",
                            text: "No files selected for upload!",
                            icon: "warning",
                        });

                        return;
                    }

                    var formData = new FormData();
                    for (var i = 0; i < files.length; i++) {
                        formData.append('up', files[i]);
                    }

                    fetch("{% url 'upload_chunk' %}", {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'X-CSRFToken': getCookie('csrftoken')
                        }
                    })
                        .then(response => response.json())
                        .then(data => {
                            if (data.ok === 1) {
                                console.log('Upload successful');
                                setTimeout(function () {
                                    $.LoadingOverlay("hide", true);
                                    // swal({
                                    //     title: "Great!",
                                    //     text: "Your Data uploaded successfully!!",
                                    //     icon: "success",
                                    //     showCancelButton: true,
                                    //     confirmButtonColor: '#DD6B55',
                                    //     confirmButtonText: 'Yes, I am sure!',
                                    //     cancelButtonText: "No, cancel it!"
                                    //  }).then(
                                    //        function () { location.reload(); },
                                    //        function () { return false; }
                                    //        );
                                    swal({
                                        title: "Great!",
                                        text: "Your Data has been save successfully! please complete the upload process",
                                        icon: "success",
                                        showCancelButton: true,
                                        confirmButtonColor: '#DD6B55',
                                        confirmButtonText: 'Yes, I am sure!',
                                        cancelButtonText: "No, cancel it!"
                                    }).then(
                                        function () {
                                            location.reload();
                                            //  $("#questionnaire").removeClass("d-none");
                                            //  $("#Submit_data").removeClass("d-none");
                                            //  $("#upload_data_btn").addClass("d-none");
                                            //  $("#filename_store").html(data.filename);
                                            //  questionnaire_filter_column(data);
                                            // return false; 
                                        },
                                        function () { return false; }
                                    );



                                }, 400);
                            } else {
                                $.LoadingOverlay("hide", true);
                                console.error('Upload failed: ' + data.info);
                                swal({
                                    title: "Opps!",
                                    text: 'Upload failed: ' + data.info,
                                    icon: "warning",
                                });
                            }
                        })
                        .catch(error => console.error('Error:', error));

                } else {
                    // alert('No extention found')
                    swal({
                        title: "Opps!",
                        text: 'Uploaded data failed, please upload it in xlsx format ',
                        icon: "warning",
                    });
                }


            }

            function questionnaire_filter_column(resp) {


                $("#que_year").empty();
                $("#que_period").empty();
                $("#que_numerical_list").empty();

                $("#que_year").append(' <option value="" selected disabled>Please select</option>');
                $("#que_period").append(' <option value="" selected disabled>Please select</option>');
                $.each(resp.column_list, function (k, value) {

                    $("#que_year").append('<option value="' + value + '" >' + value + '</option>');
                    $("#que_period").append('<option value="' + value + '" >' + value + '</option>');


                });
                $.each(resp.numerical_columns, function (k, value) {

                    $("#que_numerical_list").append('<option value="' + value + '" >' + value + '</option>');

                });

                $("#que_numerical_list").multiselect('rebuild');
                $("#que_numerical_list").multiselect({
                    //  enableClickableOptGroups: true,
                    enableFiltering: true,
                    maxHeight: 400,
                    enableCaseInsensitiveFiltering: true,
                    enableClickableOptGroups: true,
                    numberDisplayed: 1,
                    includeSelectAllOption: true,
                    selectAll: true,
                    search: true,
                });

            }

            function hasExtension_old(inputID, exts) {
                var fileName = document.getElementById(inputID).value;
                return (new RegExp('(' + exts.join('|').replace(/\./g, '\\.') + ')$')).test(fileName);
            }

            function hasExtension(filename, extensions) {
                return extensions.some(ext => filename.toLowerCase().endsWith(ext));
            }

            function formatSize(bytes) {
                var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
                if (bytes === 0) return '0 Byte';
                var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
                return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];
            }

            function getCookie(name) {
                var cookieValue = null;
                if (document.cookie && document.cookie !== '') {
                    var cookies = document.cookie.split(';');
                    for (var i = 0; i < cookies.length; i++) {
                        var cookie = cookies[i].trim();
                        if (cookie.substring(0, name.length + 1) === (name + '=')) {
                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
            }
        </script>
        <!--new upload data js end -->

        <script>
            $('#popup1').appendTo("body")
            $('#popup2').appendTo("body")

        </script>



        <script>
            $(document).ready(function () {
                $('#rowfilter').multiselect({
                    includeSelectAllOption: true,
                    enableFiltering: false,
                    maxHeight: 200,
                    // widthSynchronizationMode: 'ifPopupIsWider',
                    buttonWidth: '200px'
                    // buttonContainer: '<div class="btn-group w-100" />'
                });
                $('#basefilter').multiselect({
                    includeSelectAllOption: true,
                    enableFiltering: false,
                    maxHeight: 200,
                    dropRight: true,
                    widthSynchronizationMode: 'ifPopupIsWider',
                    buttonWidth: '200px'
                    // buttonContainer: '<div class="btn-group w-100" />'
                });

                $('#columnfilter').multiselect({
                    includeSelectAllOption: true,
                    buttonWidth: '100%',
                    dropRight: false,
                    enableFiltering: false,
                    maxHeight: 200,
                    widthSynchronizationMode: 'always',
                    buttonWidth: '200px'
                    // columns: 1,
                    // placeholder: '--Select Col Type--',
                    //     selectAll: true,
                    //     search   : true,
                    //     minHeight: 100
                });

                $('#que_numerical_list').multiselect({
                    includeSelectAllOption: true,
                    buttonWidth: '100%',
                    dropRight: false,
                    enableFiltering: false,
                    maxHeight: 200,
                    widthSynchronizationMode: 'always',


                    // columns: 1,
                    // placeholder: '--Select Col Type--',
                    //     selectAll: true,
                    //     search   : true,
                    //     minHeight: 100
                });
            });
        </script>
        <script type="text/javascript">
            $(function () {
                var options = {
                    placeholderCss: { 'background-color': '#ff8' },
                    hintCss: { 'background-color': '#bbf' },
                    onChange: function (cEl) {
                        console.log('onChange');
                    },
                    complete: function (cEl) {
                        console.log('complete');
                    },
                    isAllowed: function (cEl, hint, target) {
                        // Be carefull if you test some ul/ol elements here.
                        // Sometimes ul/ols are dynamically generated and so they have not some attributes as natural ul/ols.
                        // Be careful also if the hint is not visible. It has only display none so it is at the previous place where it was before(excluding first moves before showing).
                        if (target.data('module') === 'c' && cEl.data('module') !== 'c') {
                            hint.css('background-color', '#ff9999');
                            return false;
                        }
                        else {
                            hint.css('background-color', '#99ff99');
                            return true;
                        }
                    },
                    opener: {
                        active: true,
                        as: 'html',  // if as is not set plugin uses background image
                        close: '<i class="fa fa-minus c3"></i>',  // or 'fa-minus c3'
                        open: '<i class="fa fa-plus"></i>',  // or 'fa-plus'
                        openerCss: {
                            'display': 'inline-block',
                            //'width': '18px', 'height': '18px',
                            'float': 'left',
                            'margin-left': '-5px',
                            // 'margin-left': '-35px',
                            'margin-right': '5px',
                            //'background-position': 'center center', 'background-repeat': 'no-repeat',
                            'font-size': '1.1em'
                        }
                    },
                    ignoreClass: 'clickable'
                };

                var optionsPlus = {
                    insertZonePlus: true,
                    placeholderCss: { 'background-color': '#ff8' },
                    hintCss: { 'background-color': '#bbf' },
                    opener: {
                        active: true,
                        as: 'html',  // if as is not set plugin uses background image
                        close: '<i class="fa fa-minus c3"></i>',
                        open: '<i class="fa fa-plus"></i>',
                        openerCss: {
                            'display': 'inline-block',
                            'float': 'left',
                            'margin-left': '-5px',
                            // 'margin-left': '-35px',
                            'margin-right': '5px',
                            'font-size': '1.1em'
                        }
                    }
                };

                $('#sTree2').sortableLists(options);
                $('#sTreePlus').sortableLists(optionsPlus);

                $('#toArrBtn').on('click', function () { console.log($('#sTree2').sortableListsToArray()); });
                $('#toHierBtn').on('click', function () { console.log($('#sTree2').sortableListsToHierarchy()); });
                $('#toStrBtn').on('click', function () { console.log($('#sTree2').sortableListsToString()); });
                $('.descPicture').on('click', function (e) { $(this).toggleClass('descPictureClose'); });

                $('.clickable').on('click', function (e) { alert('Click works fine! IgnoreClass stopped onDragStart event.'); });

                /* Scrolling anchors */
                $('#toPictureAnch').on('mousedown', function (e) { scrollToAnch('pictureAnch'); return false; });
                $('#toBaseElementAnch').on('mousedown', function (e) { scrollToAnch('baseElementAnch'); return false; });
                $('#toBaseElementAnch2').on('mousedown', function (e) { scrollToAnch('baseElementAnch'); return false; });
                $('#toCssPatternAnch').on('mousedown', function (e) { scrollToAnch('cssPatternAnch'); return false; });

                function scrollToAnch(id) {
                    return true;
                    $('html, body').animate({
                        scrollTop: '-=-' + $("#" + id).offset().top + 'px'
                    }, 750);
                    return false;
                }

            });


        </script>

        <!-- <script type="text/javascript">

        // 
        //

        var html;
        for (var i = 1; i<5000; i++) {
            html +=' <li class="child sub-main collapsed pl-4" data-toggle="collapse" data-target="#intro2"><a class="child" href="#">Gender_'+i+'</a></li>';
        }
        $('#getting2').html(html);
        

        // $('#getting2')
    </script> -->

        <!--   <script type="text/javascript">
          $('.drag').draggable({ 
      appendTo: 'body',
      helper: 'clone'
    });

       //SECTION 1  clickable
    $('#sTreePlus').droppable({

      activeClass: 'active',
      hoverClass: 'hover',
      accept: ":not(.ui-sortable-helper)", // Reject clones generated by sortable
      drop: function (e, ui) {
         alert('sTreePlus')
        var table_name=ui.draggable[0].getAttribute("data-filename");
        console.log('==============ss',table_name);
        var $el = $('<li class="drop-item " id="item_b1" data-module="b" data-filename="'+table_name+'" data-value="' + ui.draggable.text() + '"><div><span id="clickable">' + ui.draggable.text() + '</span></div></li>');
        // $el.append($('<button type="button" onclick="myFunction()" class="btn btn-default btn-xs remove "><i class="fa fa-minus-square" aria-hidden="true"></i></button>').click(function () { $(this).parent().detach(); }));
        $(this).append($el);
        // console.log('Table section',e);
        var Row_array_data=$('#sTreePlus').sortableListsToArray();
        var Column_array_data=$('#sTree2').sortableListsToArray();
        find_table_name_dy(Row_array_data,Column_array_data)
      console.log('line 201 Row_array_data',Row_array_data)
      console.log('lline 201 Column_array_data',Column_array_data)


      }
    }).sortable({
      items: '.drop-item',
      sort: function() {
        // gets added unintentionally by droppable interacting with sortable
        // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
        $( this ).removeClass( "active" );
      }
    });

   //SECTION 2
    $('#sTree2').droppable({
      activeClass: 'active',
      hoverClass: 'hover',
      accept: ":not(.ui-sortable-helper)", // Reject clones generated by sortable
      drop: function (e, ui) {
         alert('sTree2')
        var table_name=ui.draggable[0].getAttribute("data-filename");
        var $el = $('<li class="drop-item" id="item_b1" data-module="b"  data-filename="'+table_name+'" data-value="' + ui.draggable.text() + '"><div>' + ui.draggable.text() + '</div></li>');
        // $el.append($('<button type="button" class="btn btn-default btn-xs remove"><i class="fa fa-minus-square" aria-hidden="true"></i></button>').click(function () { $(this).parent().detach(); }));
        $(this).append($el);
         var Row_array_data1=$('#sTreePlus').sortableListsToArray();
        var Column_array_data1=$('#sTree2').sortableListsToArray();
          console.log('Row_array_data Row 111',Row_array_data1)
      console.log('length col 111',Column_array_data1)

        // alert('ss')
        find_table_name_dy(Row_array_data1,Column_array_data1)
      }
    }).sortable({
      items: '.drop-item',
      sort: function() {
        // gets added unintentionally by droppable interacting with sortable
        // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
        $( this ).removeClass( "active" );
      }
    });

    </script> -->
</body>

</html>